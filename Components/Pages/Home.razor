@page "/"

<div class="container">
	<div class="card">
		<div class="card-header">
			<h6>اماکن ورزشی</h6>
		</div>
		<div class="card-body">
			<p>اماکن دولتی وزارت ورزش: <b>@sportFacilities.Count()</b></p>
		</div>
	</div>

	<div class="card">
		<div class="card-header">
			<h6>دوره های مربیگری</h6>
		</div>
		<div class="card-body">
			<p>تعداد مربیان: <b>@coachesCount</b></p>
			<p>تعداد داوران: <b>@refereesCount</b></p>
		</div>
	</div>
</div>

@code {
	private AppDbContext context = default!;

	private DbSet<AthleticFacility> sportFacilities;

	private int coachesCount;
	private int refereesCount;

	protected override void OnInitialized()
	{
		context = DbFactory.CreateDbContext();

		sportFacilities = context.AthleticFacilities;

		var sportCourseParticipants = context.SportsCourses
			.Include(scp => scp.Participants)
			.Select(scp => scp.Participants);

		coachesCount = context.SportsCourses
			.Include(sc => sc.Participants).Count();

		refereesCount = context.SportsCourses
			.Include(sc => sc.Participants).Count();
	}
}
